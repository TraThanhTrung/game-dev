@page
@model GameServer.Areas.Admin.Pages.Users.IndexModel
@{
    ViewData["Title"] = "Users";
}

<style>
    /* Enhanced Breadcrumb Styles */
    .page-header .breadcrumb {
        background: transparent !important;
        padding: 0.75rem 0 !important;
        margin: 0 !important;
        display: flex !important;
        align-items: center !important;
        flex-wrap: wrap !important;
    }

    .page-header .breadcrumb-item {
        display: inline-flex !important;
        align-items: center !important;
    }

    .page-header .breadcrumb-item a {
        color: #a855f7 !important;
        text-decoration: none !important;
        display: inline-flex !important;
        align-items: center !important;
        padding: 0.25rem 0.5rem !important;
        border-radius: 4px !important;
        font-weight: 500 !important;
        transition: all 0.3s ease !important;
    }

    .page-header .breadcrumb-item a:hover {
        color: #9333ea !important;
        background-color: rgba(168, 85, 247, 0.1) !important;
        transform: translateY(-1px) !important;
    }

    .page-header .breadcrumb-item a i {
        transition: all 0.3s ease !important;
    }

    .page-header .breadcrumb-item a:hover i {
        transform: scale(1.1) !important;
        opacity: 1 !important;
    }

    .page-header .breadcrumb-item.active {
        color: #9ca3af !important;
        font-weight: 500 !important;
        display: inline-flex !important;
        align-items: center !important;
        padding: 0.25rem 0.5rem !important;
    }

    .page-header .breadcrumb-item+.breadcrumb-item::before {
        content: "â€º" !important;
        padding: 0 0.75rem !important;
        color: #9ca3af !important;
        font-size: 1.2rem !important;
        line-height: 1 !important;
    }

    .page-header .breadcrumb-item i {
        font-size: 1.1rem !important;
        margin-right: 0.35rem !important;
        opacity: 0.9 !important;
    }
</style>

<div class="page-header">
    <h3 class="page-title">
        <i class="mdi mdi-account-multiple text-primary"></i>
        Users Management
    </h3>
    <nav aria-label="breadcrumb" style="margin-top: 0.5rem;">
        <ol class="breadcrumb"
            style="background: transparent; padding: 0.75rem 0; margin: 0; display: flex; align-items: center; flex-wrap: wrap;">
            <li class="breadcrumb-item" style="display: inline-flex; align-items: center;">
                <a asp-area="Admin" asp-page="/Index"
                    style="color: #a855f7 !important; text-decoration: none !important; display: inline-flex; align-items: center; padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 500; transition: all 0.3s ease;">
                    <i class="mdi mdi-home" style="font-size: 1.1rem; margin-right: 0.35rem; opacity: 0.9;"></i>
                    Dashboard
                </a>
            </li>
            <li class="breadcrumb-item active" aria-current="page"
                style="display: inline-flex; align-items: center; color: #9ca3af; font-weight: 500; padding: 0.25rem 0.5rem;">
                <i class="mdi mdi-account-multiple" style="font-size: 1.1rem; margin-right: 0.35rem;"></i>
                Users
            </li>
        </ol>
    </nav>
</div>

<div class="row">
    <div class="col-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Users List</h4>
                <form method="get" class="mb-3">
                    <div class="row">
                        <div class="col-md-6">
                            <input type="text" name="search" class="form-control" placeholder="Search by name..."
                                value="@Model.SearchTerm" />
                        </div>
                        <div class="col-md-1" style="width: 5%!important;">
                            <button type="submit" class="btn btn-primary">Search</button>
                        </div>
                        @if (!string.IsNullOrEmpty(Model.SearchTerm))
                        {
                            <div class="col-md-1">
                                <a asp-area="Admin" asp-page="/Users/Index" class="btn btn-secondary">Clear</a>
                            </div>
                        }
                    </div>
                </form>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Level</th>
                                <th>Exp</th>
                                <th>Gold</th>
                                <th>Created At</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var user in Model.Users)
                            {
                                <tr>
                                    <td>@user.Id.ToString("N")[..8]...</td>
                                    <td>@user.Name</td>
                                    <td>@user.Level</td>
                                    <td>@user.Exp</td>
                                    <td>@user.Gold</td>
                                    <td>@user.CreatedAt.ToString("yyyy-MM-dd HH:mm")</td>
                                    <td>
                                        <a asp-area="Admin" asp-page="/Users/Details" asp-route-id="@user.Id"
                                            class="btn btn-sm btn-primary">
                                            <i class="mdi mdi-eye"></i> View
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                @if (Model.TotalPages > 1)
                {
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            @if (Model.CurrentPage > 1)
                            {
                                <li class="page-item">
                                    <a class="page-link" asp-route-page="@(Model.CurrentPage - 1)"
                                        asp-route-search="@Model.SearchTerm">Previous</a>
                                </li>
                            }
                            @for (int i = 1; i <= Model.TotalPages; i++)
                            {
                                <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
                                    <a class="page-link" asp-route-page="@i" asp-route-search="@Model.SearchTerm">@i</a>
                                </li>
                            }
                            @if (Model.CurrentPage < Model.TotalPages)
                            {
                                <li class="page-item">
                                    <a class="page-link" asp-route-page="@(Model.CurrentPage + 1)"
                                        asp-route-search="@Model.SearchTerm">Next</a>
                                </li>
                            }
                        </ul>
                    </nav>
                }
                <p class="text-muted">Total: @Model.TotalUsers users</p>
            </div>
        </div>
    </div>
</div>
